# 第一章：基础

随着你对Rust学习的深入，准确理解基础知识非常重要。Rust和其他语言一样，当你开始使用这个语言的复杂特性时，各种关键词和概念的精确含义变得很重要。在这一章中，我们将浏览Rust的原生类型，并尝试给出他们的清晰定义，它们是如何工作的，以及它们为什么是这样的。尤其是，我们会查看为什么变量和值不同，它们如何在内存中被表示的，以及一个程序有哪些不同的内存区域。然后，我们会讨论一些内容，如所有权，借用，生命周期，以便你继续阅读本书。

你可以顺序阅读本章，或者用作参考，来复习一些感觉不确定的概念。我建议你感觉内容很轻松时再继续进行，因为错误理解原生类型将很快阻挡理解高级话题，或者导致错误使用。

## 讨论内存

不是所有内存都是相同的。在大部分编程环境中，你的程序可以访问栈，堆，寄存器，代码段(text segments)，存储器映射寄存器(memory-mapped register)，内存映射文件（*Memory*-*mapped file*），和非易失性存储器（nonvolatile RAM）。在特定情况下，你选择使用哪个会影响你能存储什么，它能访问多长时间，以及你是用什么机制来访问它。这些内存区域的细节在不同平台不同，超出了本书讨论范围，但一些对于你理解Rust代码很重要，需要进行讨论。

### 内存术语

在深入研究内存区域之前，你需要首先了解值，变量和指针的区别。Rust中的值是一个类型和该类型的值域的一个元素的组合。一个值可以根据类型的_表示法_被转为字节序列，但就其本身而言，你可以认为一个值更像你（一个程序员[?]）。例如类型为u8的数字6，是整数6的一个实例，其_在内存中的表示_是字节0x06。类似，字符串"Hello world"是在字符串域的一个值，其_表示_形式是UTF-8编码。值的含义与这些字节存储的位置无关。

一个值可以被存在一个**位置**，在Rust术语中是“一个可以放一个值的位置”。这个位置可以在栈上，堆上，或者其他很多地方。最常见的放置一个值的地方是**变量**，其为一个栈上的命名的slot。

一个指针是一个值，可以存放一个区域的内存地址，因此，一个指针指向一个位置。指针可以被解引用以访问存储在它所指向的内存位置的值。我们可以在多个变量中存储同一个指针，因此有多个变量间接的指向内存中的同一个位置，从而指向底层的同一个值。

考虑如下的代码1-1，其展示了这三个元素：

---



```rust
let x = 42;
let y = 43;
let var1 = &x;
let mut var2 = &x;
var2 = &y;
```

---

Listing 1-1: Values, variables, and pointers

这里，